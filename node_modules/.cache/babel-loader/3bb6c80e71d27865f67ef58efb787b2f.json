{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinstanmeyer/Development/code/projects/keyboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ProfileEdit(_ref){var current_user=_ref.current_user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),viewOrigin=_useState2[0],setViewOrigin=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),viewScore=_useState6[0],setViewScore=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),viewProfile=_useState8[0],setViewProfile=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),changeUsername=_useState10[0],setChangeUsername=_useState10[1];var navigate=useNavigate();function onUserSubmit(e){e.preventDefault();if(username.length>=5&&username.length<20){fetch(\"http://35.247.18.60/current_user/update\",{method:'PATCH',headers:{Authorization:localStorage.getItem(\"token\"),'Content-Type':'application/json'},body:JSON.stringify({username:username,\"view_profile?\":viewProfile,\"view_origin?\":viewOrigin,\"view_high_score?\":viewScore})}).then(function(r){return r.json();}).then(function(data){console.log(data);setChangeUsername(false);navigate('/profile');});}else{alert('username must have 5+ characters');}}useEffect(function(){fetch('http://35.247.18.60/users/current',{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(r){return r.json();}).then(function(r){if(r.hasOwnProperty('email')){setViewScore(r[\"view_high_score?\"]);setViewOrigin(r[\"view_origin?\"]);setViewProfile(r[\"view_profile?\"]);setUsername(r.username);}else{console.log(\"not signed in\");}});},[]);console.log(viewScore,viewOrigin,viewProfile);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-1/4 mt-14 z-20 rounded-xl mx-auto flex flex-col h-fit bg-sky-900\",children:[/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return navigate('/profile');},className:\"z-40 absolute left-4 top-3 bg-emerald-500 text-sky-900 text-sm px-2 rounded-md font-bold hover:cursor-pointer\",children:[\"<=\",\" go back\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-center relative m-6\",children:/*#__PURE__*/_jsx(\"img\",{className:\"h-32 w-32 mx-auto object-cover border-4 border-emerald-500 rounded-md\",src:current_user.avatar_url?current_user.avatar_url:\"https://avatars.githubusercontent.com/u/35440139?v=4}\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-xl italic text-emerald-500\",children:\"Preferences:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown dropdown-right h-10 flex items-center justify-center\",children:!changeUsername?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setChangeUsername(true);},className:\"hover:bg-emerald-300 h-6 bg-emerald-500 rounded-md w-full text-sky-900 text-sm font-bold\",children:\"change username\"}):/*#__PURE__*/_jsx(\"input\",{value:username,onChange:function onChange(e){return setUsername(e.target.value);},placeholder:\"5+ characters\",className:\"bg-emerald-500 h-6 border-[3px] border-emerald-300 rounded-md w-full placeholder-sky-900/70 text-sky-900 font-bold text-sm text-center\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown dropdown-right my-3 w-full\",children:[/*#__PURE__*/_jsxs(\"label\",{tabIndex:0,className:\"btn no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300 w-full\",children:[\"profile: \",viewProfile?\"public\":\"private\"]}),/*#__PURE__*/_jsxs(\"ul\",{tabIndex:0,className:\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewProfile(true);},className:\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"public\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewProfile(false);},className:\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"private\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown dropdown-right my-3\",children:[/*#__PURE__*/_jsxs(\"label\",{tabIndex:0,className:\"btn no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300 w-full\",children:[\"highscore: \",viewScore?\"public\":\"private\"]}),/*#__PURE__*/_jsxs(\"ul\",{tabIndex:0,className:\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewScore(true);},className:\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"public\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewScore(false);},className:\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"private\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto dropdown dropdown-right mt-3 mb-4 w-full\",children:[/*#__PURE__*/_jsxs(\"label\",{tabIndex:0,className:\"btn w-full no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300\",children:[\"origin: \",viewOrigin?\"public\":\"private\"]}),/*#__PURE__*/_jsxs(\"ul\",{tabIndex:0,className:\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewOrigin(true);},className:\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"public\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setViewOrigin(false);},className:\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\",children:/*#__PURE__*/_jsx(\"a\",{children:\"private\"})})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:onUserSubmit,className:\"text-xl font-bold bg-emerald-500 text-sky-900 hover:text-sky-600 w-1/4 mx-auto mb-4 rounded-md\",children:\"submit\"})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","ProfileEdit","current_user","viewOrigin","setViewOrigin","username","setUsername","viewScore","setViewScore","viewProfile","setViewProfile","changeUsername","setChangeUsername","navigate","onUserSubmit","e","preventDefault","length","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","then","r","json","data","console","log","alert","hasOwnProperty","avatar_url","target","value"],"sources":["/Users/konstantinstanmeyer/Development/code/projects/keyboard/src/ProfileEdit.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function ProfileEdit({ current_user }){\n    const [viewOrigin, setViewOrigin] = useState(false)\n    const [username, setUsername] = useState(\"\")\n    const [viewScore, setViewScore] = useState(false)\n    const [viewProfile, setViewProfile] = useState(false)\n    const [changeUsername, setChangeUsername] = useState(false)\n    const navigate = useNavigate();\n\n    function onUserSubmit(e){\n        e.preventDefault()\n        if (username.length >= 5 && username.length < 20){\n            fetch(`http://35.247.18.60/current_user/update`,{\n            method:'PATCH',\n            headers: {\n                Authorization: localStorage.getItem(\"token\"),\n                'Content-Type': 'application/json',\n            },\n            body:JSON.stringify({\n                username: username,\n                \"view_profile?\": viewProfile,\n                \"view_origin?\": viewOrigin,\n                \"view_high_score?\": viewScore\n            })\n            })\n            .then((r) => r.json())\n            .then((data) => {\n                console.log(data)\n                setChangeUsername(false)\n                navigate('/profile')\n            })\n        } else {\n            alert('username must have 5+ characters')\n        }\n    }\n\n    useEffect(()=> {\n        fetch('http://35.247.18.60/users/current', {\n          headers: {\n              Authorization: localStorage.getItem(\"token\")\n          }\n          })\n          .then(r => r.json())\n          .then(r => {\n              if (r.hasOwnProperty('email')){\n                  setViewScore(r[\"view_high_score?\"])\n                  setViewOrigin(r[\"view_origin?\"])\n                  setViewProfile(r[\"view_profile?\"])\n                  setUsername(r.username)\n              } else {\n                  console.log(\"not signed in\")\n              }\n          })\n      }, [])\n\n    console.log(viewScore, viewOrigin, viewProfile)\n\n    return (\n        <div className=\"relative w-1/4 mt-14 z-20 rounded-xl mx-auto flex flex-col h-fit bg-sky-900\">\n            <p onClick={() => navigate('/profile')} className=\"z-40 absolute left-4 top-3 bg-emerald-500 text-sky-900 text-sm px-2 rounded-md font-bold hover:cursor-pointer\">{\"<=\"} go back</p>\n            <div className=\"flex flex-col justify-center relative m-6\">\n                <img className=\"h-32 w-32 mx-auto object-cover border-4 border-emerald-500 rounded-md\" src={current_user.avatar_url ? current_user.avatar_url : \"https://avatars.githubusercontent.com/u/35440139?v=4}\"}/>\n            </div>\n            <h2 className=\"text-center text-xl italic text-emerald-500\">Preferences:</h2>\n            <div className=\"w-1/2 mx-auto\">\n                <div className=\"dropdown dropdown-right h-10 flex items-center justify-center\">\n                    {!changeUsername ? <button onClick={() => setChangeUsername(true)} className=\"hover:bg-emerald-300 h-6 bg-emerald-500 rounded-md w-full text-sky-900 text-sm font-bold\">change username</button> : <input value={username} onChange={(e) => setUsername(e.target.value)} placeholder=\"5+ characters\" className=\"bg-emerald-500 h-6 border-[3px] border-emerald-300 rounded-md w-full placeholder-sky-900/70 text-sky-900 font-bold text-sm text-center\"/>}\n                </div>\n            </div>\n            <div className=\"w-1/2 mx-auto\">\n                <div className=\"dropdown dropdown-right my-3 w-full\">\n                    <label tabIndex={0} className=\"btn no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300 w-full\">profile: {viewProfile ? \"public\" : \"private\"}</label>\n                    <ul tabIndex={0} className=\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\">\n                        <li onClick={() => setViewProfile(true)} className=\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\"><a>public</a></li>\n                        <li onClick={() => setViewProfile(false)} className=\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\"><a>private</a></li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"w-1/2 mx-auto\">\n                <div className=\"dropdown dropdown-right my-3\">\n                    <label tabIndex={0} className=\"btn no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300 w-full\">highscore: {viewScore ? \"public\" : \"private\"}</label>\n                    <ul tabIndex={0} className=\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\">\n                        <li onClick={() => setViewScore(true)} className=\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\"><a>public</a></li>\n                        <li onClick={() => setViewScore(false)} className=\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\"><a>private</a></li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"w-1/2 mx-auto\">\n                <div className=\"mx-auto dropdown dropdown-right mt-3 mb-4 w-full\">\n                    <label tabIndex={0} className=\"btn w-full no-animation m-1 bg-emerald-500 text-sky-900 hover:bg-emerald-300\">origin: {viewOrigin ? \"public\" : \"private\"}</label>\n                    <ul tabIndex={0} className=\"dropdown-content menu p-2 shadow rounded-box w-52 bg-sky-800\">\n                        <li onClick={() => setViewOrigin(true)} className=\"bg-emerald-500 hover:bg-emerald-300 border-b-[4px] border-sky-800 text-sky-900\"><a>public</a></li>\n                        <li onClick={() => setViewOrigin(false)} className=\"bg-emerald-500 hover:bg-emerald-300 text-sky-900\"><a>private</a></li>\n                    </ul>\n                </div>\n            </div>\n            <button onClick={onUserSubmit} className=\"text-xl font-bold bg-emerald-500 text-sky-900 hover:text-sky-600 w-1/4 mx-auto mb-4 rounded-md\">submit</button>\n        </div>\n    )\n}"],"mappings":"mJAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAE/C,cAAe,SAASC,YAAW,MAAkB,IAAfC,aAAY,MAAZA,YAAY,CAC9C,cAAoCH,QAAQ,CAAC,KAAK,CAAC,wCAA5CI,UAAU,eAAEC,aAAa,eAChC,eAAgCL,QAAQ,CAAC,EAAE,CAAC,yCAArCM,QAAQ,eAAEC,WAAW,eAC5B,eAAkCP,QAAQ,CAAC,KAAK,CAAC,yCAA1CQ,SAAS,eAAEC,YAAY,eAC9B,eAAsCT,QAAQ,CAAC,KAAK,CAAC,yCAA9CU,WAAW,eAAEC,cAAc,eAClC,eAA4CX,QAAQ,CAAC,KAAK,CAAC,0CAApDY,cAAc,gBAAEC,iBAAiB,gBACxC,GAAMC,SAAQ,CAAGb,WAAW,EAAE,CAE9B,QAASc,aAAY,CAACC,CAAC,CAAC,CACpBA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAIX,QAAQ,CAACY,MAAM,EAAI,CAAC,EAAIZ,QAAQ,CAACY,MAAM,CAAG,EAAE,CAAC,CAC7CC,KAAK,2CAA2C,CAChDC,MAAM,CAAC,OAAO,CACdC,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC5C,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CAChBrB,QAAQ,CAAEA,QAAQ,CAClB,eAAe,CAAEI,WAAW,CAC5B,cAAc,CAAEN,UAAU,CAC1B,kBAAkB,CAAEI,SACxB,CAAC,CACD,CAAC,CAAC,CACDoB,IAAI,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,IAAI,EAAE,GAAC,CACrBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACZC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CACjBlB,iBAAiB,CAAC,KAAK,CAAC,CACxBC,QAAQ,CAAC,UAAU,CAAC,CACxB,CAAC,CAAC,CACN,CAAC,IAAM,CACHoB,KAAK,CAAC,kCAAkC,CAAC,CAC7C,CACJ,CAEAnC,SAAS,CAAC,UAAK,CACXoB,KAAK,CAAC,mCAAmC,CAAE,CACzCE,OAAO,CAAE,CACLC,aAAa,CAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAC/C,CACA,CAAC,CAAC,CACDI,IAAI,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAI,EAAE,GAAC,CACnBF,IAAI,CAAC,SAAAC,CAAC,CAAI,CACP,GAAIA,CAAC,CAACM,cAAc,CAAC,OAAO,CAAC,CAAC,CAC1B1B,YAAY,CAACoB,CAAC,CAAC,kBAAkB,CAAC,CAAC,CACnCxB,aAAa,CAACwB,CAAC,CAAC,cAAc,CAAC,CAAC,CAChClB,cAAc,CAACkB,CAAC,CAAC,eAAe,CAAC,CAAC,CAClCtB,WAAW,CAACsB,CAAC,CAACvB,QAAQ,CAAC,CAC3B,CAAC,IAAM,CACH0B,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAChC,CACJ,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAERD,OAAO,CAACC,GAAG,CAACzB,SAAS,CAAEJ,UAAU,CAAEM,WAAW,CAAC,CAE/C,mBACI,aAAK,SAAS,CAAC,6EAA6E,wBACxF,WAAG,OAAO,CAAE,yBAAMI,SAAQ,CAAC,UAAU,CAAC,EAAC,CAAC,SAAS,CAAC,+GAA+G,WAAE,IAAI,cAAa,cACpL,YAAK,SAAS,CAAC,2CAA2C,uBACtD,YAAK,SAAS,CAAC,uEAAuE,CAAC,GAAG,CAAEX,YAAY,CAACiC,UAAU,CAAGjC,YAAY,CAACiC,UAAU,CAAG,uDAAwD,EAAE,EACxM,cACN,WAAI,SAAS,CAAC,6CAA6C,0BAAkB,cAC7E,YAAK,SAAS,CAAC,eAAe,uBAC1B,YAAK,SAAS,CAAC,+DAA+D,UACzE,CAACxB,cAAc,cAAG,eAAQ,OAAO,CAAE,yBAAMC,kBAAiB,CAAC,IAAI,CAAC,EAAC,CAAC,SAAS,CAAC,0FAA0F,6BAAyB,cAAG,cAAO,KAAK,CAAEP,QAAS,CAAC,QAAQ,CAAE,kBAACU,CAAC,QAAKT,YAAW,CAACS,CAAC,CAACqB,MAAM,CAACC,KAAK,CAAC,EAAC,CAAC,WAAW,CAAC,eAAe,CAAC,SAAS,CAAC,wIAAwI,EAAE,EACvb,EACJ,cACN,YAAK,SAAS,CAAC,eAAe,uBAC1B,aAAK,SAAS,CAAC,qCAAqC,wBAChD,eAAO,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8EAA8E,uBAAW5B,WAAW,CAAG,QAAQ,CAAG,SAAS,GAAS,cAClK,YAAI,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8DAA8D,wBACrF,WAAI,OAAO,CAAE,yBAAMC,eAAc,CAAC,IAAI,CAAC,EAAC,CAAC,SAAS,CAAC,gFAAgF,uBAAC,6BAAa,EAAK,cACtJ,WAAI,OAAO,CAAE,yBAAMA,eAAc,CAAC,KAAK,CAAC,EAAC,CAAC,SAAS,CAAC,kDAAkD,uBAAC,8BAAc,EAAK,GACzH,GACH,EACJ,cACN,YAAK,SAAS,CAAC,eAAe,uBAC1B,aAAK,SAAS,CAAC,8BAA8B,wBACzC,eAAO,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8EAA8E,yBAAaH,SAAS,CAAG,QAAQ,CAAG,SAAS,GAAS,cAClK,YAAI,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8DAA8D,wBACrF,WAAI,OAAO,CAAE,yBAAMC,aAAY,CAAC,IAAI,CAAC,EAAC,CAAC,SAAS,CAAC,gFAAgF,uBAAC,6BAAa,EAAK,cACpJ,WAAI,OAAO,CAAE,yBAAMA,aAAY,CAAC,KAAK,CAAC,EAAC,CAAC,SAAS,CAAC,kDAAkD,uBAAC,8BAAc,EAAK,GACvH,GACH,EACJ,cACN,YAAK,SAAS,CAAC,eAAe,uBAC1B,aAAK,SAAS,CAAC,kDAAkD,wBAC7D,eAAO,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8EAA8E,sBAAUL,UAAU,CAAG,QAAQ,CAAG,SAAS,GAAS,cAChK,YAAI,QAAQ,CAAE,CAAE,CAAC,SAAS,CAAC,8DAA8D,wBACrF,WAAI,OAAO,CAAE,yBAAMC,cAAa,CAAC,IAAI,CAAC,EAAC,CAAC,SAAS,CAAC,gFAAgF,uBAAC,6BAAa,EAAK,cACrJ,WAAI,OAAO,CAAE,yBAAMA,cAAa,CAAC,KAAK,CAAC,EAAC,CAAC,SAAS,CAAC,kDAAkD,uBAAC,8BAAc,EAAK,GACxH,GACH,EACJ,cACN,eAAQ,OAAO,CAAEU,YAAa,CAAC,SAAS,CAAC,gGAAgG,oBAAgB,GACvJ,CAEd"},"metadata":{},"sourceType":"module"}