{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signin(_ref){var setCurrentUser=_ref.setCurrentUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),closed=_useState6[0],setClosed=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),startedTyping=_useState8[0],setStartedTyping=_useState8[1];var navigate=useNavigate();var emailRegex=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;//       fetch(\"http://localhost:3000/signup\", {\n//   method: \"post\",\n//   headers: {\n//     \"Content-Type\": \"application/json\",\n//   },\n//   body: JSON.stringify({\n//     user: {\n//       email: \"test5@test.com\",\n//       password: \"password\",\n//     },\n//   }),\n// })\n//   .then((res) => {\n//     if (res.ok) {\n//       console.log(res.headers.get(\"Authorization\"));\n//       localStorage.setItem(\"token\", res.headers.get(\"Authorization\"));\n//       return res.json();\n//     } else {\n//       throw new Error(res);\n//     }\n//   })\n//   .then((json) => console.dir(json))\n//   .catch((err) => console.error(err));\nuseEffect(function(){if(startedTyping===false&&email.length>0){setStartedTyping(true);}},[email,startedTyping]);function handleSubmit(e){e.preventDefault();fetch(\"http://35.247.18.60/login\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{email:email,password:password}})}).then(function(res){if(res.ok){// console.log(res);\nlocalStorage.setItem(\"token\",res.headers.get(\"Authorization\"));fetch('http://35.247.18.60/users/current',{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(r){return r.json();}).then(function(r){if(r.hasOwnProperty('email')){setCurrentUser(r);navigate('/profile');}});}});}return/*#__PURE__*/_jsx(\"div\",{className:\"h-fit w-1/4 bg-sky-900 mx-auto rounded-md relative mt-14 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-10\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"h-24 w-24 m-auto mb-5\",alt:\"signin\",src:\"https://cdn-icons-png.flaticon.com/512/2648/2648647.png\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-emerald-500 text-center text-xl pb-5 mx-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Enter Valid Login Credentials:\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"relative flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center pb-3\",children:/*#__PURE__*/_jsx(\"input\",{className:\"h-10 w-2/3 border-4 rounded-md border-emerald-500 placeholder-sky-900 bg-emerald-500 text-sky-900 m-auto indent-3 py-5 my-3\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center\",children:!emailRegex.test(email)&&startedTyping?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm absolute -top-4 text-red-500 p-0 m-0\",children:\"*please enter a valid email*\"}):null}),/*#__PURE__*/_jsx(\"input\",{className:\"h-10 w-2/3 border-4 border-emerald-500 text-sky-900 rounded-md m-auto indent-3 py-5 my-2 placeholder-sky-900 bg-emerald-500\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Password...\",type:closed?\"password\":\"text\"}),/*#__PURE__*/_jsx(\"img\",{alt:\"eyes\",onClick:function onClick(){return setClosed(!closed);},className:\"h-6 w-6 relative ml-auto -top-11 right-[20%]\",src:closed?\"https://cdn-icons-png.flaticon.com/512/2356/2356734.png\":\"https://cdn-icons-png.flaticon.com/512/709/709612.png\"}),/*#__PURE__*/_jsx(\"button\",{id:\"submit-button\",className:\"rounded-md h-20 w-2/3 bg-emerald-500 m-auto text-2xl text-sky-900\",children:\"Sign In\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return navigate('/signup');},className:\"text-center text-emerald-500 mt-1 hover:cursor-pointer\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"i\",{children:\"Sign up!\"})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Signin","setCurrentUser","email","setEmail","password","setPassword","closed","setClosed","startedTyping","setStartedTyping","navigate","emailRegex","length","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","res","ok","localStorage","setItem","get","Authorization","getItem","r","json","hasOwnProperty","target","value","test"],"sources":["/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/src/components/Signin.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function Signin({ setCurrentUser }){\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [closed, setClosed] = useState(true)\n    const [startedTyping, setStartedTyping] = useState(false)\n    const navigate = useNavigate();\n    const emailRegex = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n\n//       fetch(\"http://localhost:3000/signup\", {\n//   method: \"post\",\n//   headers: {\n//     \"Content-Type\": \"application/json\",\n//   },\n//   body: JSON.stringify({\n//     user: {\n//       email: \"test5@test.com\",\n//       password: \"password\",\n//     },\n//   }),\n// })\n//   .then((res) => {\n//     if (res.ok) {\n//       console.log(res.headers.get(\"Authorization\"));\n//       localStorage.setItem(\"token\", res.headers.get(\"Authorization\"));\n//       return res.json();\n//     } else {\n//       throw new Error(res);\n//     }\n//   })\n//   .then((json) => console.dir(json))\n//   .catch((err) => console.error(err));\n\n    useEffect(() => {\n        if (startedTyping === false && email.length > 0){\n            setStartedTyping(true);\n        }\n    }, [email, startedTyping])\n\n    function handleSubmit(e){\n        e.preventDefault();\n\n        fetch(\"http://35.247.18.60/login\", {\n        method: \"post\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            user: {\n            email: email,\n            password: password,\n            },\n        }),\n        })\n        .then((res) => {\n            if (res.ok) {\n                // console.log(res);\n                localStorage.setItem(\"token\", res.headers.get(\"Authorization\"))\n                fetch('http://35.247.18.60/users/current', {\n                    headers: {\n                        Authorization: localStorage.getItem(\"token\")\n                    }\n                    })\n                    .then(r => r.json())\n                    .then(r => {\n                        if (r.hasOwnProperty('email')){\n                            setCurrentUser(r)\n                            navigate('/profile')\n                        }\n                })\n            }\n        })\n    }\n\n    return(\n        <div className=\"h-fit w-1/4 bg-sky-900 mx-auto rounded-md relative mt-14 shadow-xl\">\n            <div className=\"py-10\">\n            <img className=\"h-24 w-24 m-auto mb-5\" alt=\"signin\" src=\"https://cdn-icons-png.flaticon.com/512/2648/2648647.png\"/>\n            <h5 className=\"text-emerald-500 text-center text-xl pb-5 mx-5\"><strong>Enter Valid Login Credentials:</strong></h5>\n            <form onSubmit={handleSubmit} className=\"relative flex flex-col justify-center\">\n                <div className=\"relative flex justify-center pb-3\">\n                    <input className=\"h-10 w-2/3 border-4 rounded-md border-emerald-500 placeholder-sky-900 bg-emerald-500 text-sky-900 m-auto indent-3 py-5 my-3\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email...\"/>\n                </div>\n                <div className=\"relative flex justify-center\">\n                {!emailRegex.test(email) && startedTyping ? <p className=\"text-sm absolute -top-4 text-red-500 p-0 m-0\">*please enter a valid email*</p> : null}\n                </div>\n                <input className=\"h-10 w-2/3 border-4 border-emerald-500 text-sky-900 rounded-md m-auto indent-3 py-5 my-2 placeholder-sky-900 bg-emerald-500\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password...\" type={closed ? \"password\" : \"text\"}/>\n                <img alt=\"eyes\" onClick={() => setClosed(!closed)} className=\"h-6 w-6 relative ml-auto -top-11 right-[20%]\" src={closed ? \"https://cdn-icons-png.flaticon.com/512/2356/2356734.png\" : \"https://cdn-icons-png.flaticon.com/512/709/709612.png\"}/>\n                <button id=\"submit-button\" className=\"rounded-md h-20 w-2/3 bg-emerald-500 m-auto text-2xl text-sky-900\">Sign In</button>\n            </form>\n            <p onClick={() => navigate('/signup')} className=\"text-center text-emerald-500 mt-1 hover:cursor-pointer\">Don't have an account? <i>Sign up!</i></p>\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}