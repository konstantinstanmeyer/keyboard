{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Leaderboard(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"random\"),_useState4=_slicedToArray(_useState3,2),style=_useState4[0],setStyle=_useState4[1];var _useState5=useState(25),_useState6=_slicedToArray(_useState5,2),wordCount=_useState6[0],setWordCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];useEffect(function(){setIsLoading(true);fetch('http://localhost:3000/users').then(function(response){return response.json();}).then(function(data){setUsers(data);setIsLoading(false);});},[]);function handleVisitProfile(user){navigate(\"/profile/\".concat(user.id));}function getHighestScore(user){var score=0;if(user.scores.length===0){score=0;}else{var scores=user.scores.filter(function(score){return score.style===style;}).filter(function(score){return score.word_length===wordCount;});if(scores.length===0){score=0;}else{score=Math.floor(parseInt(scores.sort(function(a,b){return b.score-a.score;})[0].score));}}return score;}var displayedUsers=users.filter(function(user){return user[\"view_high_score?\"];}).sort(function(a,b){return getHighestScore(b)-getHighestScore(a);}).filter(function(user){return getHighestScore(user)!==0;});if(style===\"bacon\"&&wordCount!==25){setWordCount(25);}else if(style===\"quote\"&&wordCount!==25){setWordCount(25);}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex relative flex-col justify-center items-center rounded-b-lg mt-6 mb-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-sky-900 w-2/5 mb-8 mx-auto rounded-lg relative items-center flex flex-row shadow-xl\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setStyle('random');},className:\"w-1/3 \".concat(style===\"random\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" text-center hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"random\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setStyle('quote');},className:\"w-1/3 text-center \".concat(style===\"quote\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"quote\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setStyle('bacon');},className:\"w-1/3 text-center \".concat(style===\"bacon\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"bacon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[2px] h-8 my-2 bg-emerald-500\"}),/*#__PURE__*/_jsx(\"p\",{id:\"15\",onClick:function onClick(){return setWordCount(15);},className:\"w-1/3 \".concat(wordCount===15&&style!==\"bacon\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" text-center hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"15\"}),/*#__PURE__*/_jsx(\"p\",{id:\"30\",onClick:function onClick(){return setWordCount(25);},className:\"w-1/3 \".concat(wordCount===25||style===\"bacon\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" text-center hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"25\"}),/*#__PURE__*/_jsx(\"p\",{id:\"45\",onClick:function onClick(){return setWordCount(50);},className:\"w-1/3 \".concat(wordCount===50&&style!==\"bacon\"?\"text-emerald-500/100\":\"text-emerald-500/40\",\" text-center hover:text-emerald-500/100 hover:cursor-pointer\"),children:\"50\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 overflow-x-auto shadow-xl\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"r\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-emerald-500 bg-sky-900 rounded-tl-lg\"}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-sky-900 text-emerald-500 text-lg\",children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-emerald-500 bg-sky-900\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-emerald-500 bg-sky-900 text-lg rounded-tr-lg\",children:\"Highscore\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"\",children:displayedUsers.map(function(user,i){return/*#__PURE__*/_jsxs(\"tr\",{className:\"\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-sky-800 w-1/4 h-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-3 h-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"items-center flex flex-row avatar pr-0 ml-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"ml-2 w-3 text-lg font-bold text-emerald-500\",children:i+1}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-12 object-cover rounded-full mask w-12 h-12 border-2 border-emerald-500\",children:/*#__PURE__*/_jsx(\"img\",{className:\"\",src:user.avatar_url?user.avatar_url:\"https://avatars.githubusercontent.com/u/35440139?v=4}\",alt:\"Avatar\"})})]})})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-sky-800 w-1/4 text-emerald-500 font-bold\",children:/*#__PURE__*/_jsx(\"span\",{className:\"\",children:user.username})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-sky-800 w-1/4 text-emerald-500 text-md italic\",children:user[\"view_profile?\"]?/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleVisitProfile(user);},className:\"hover:underline hover:cursor-pointer\",children:\"view profile\"}):/*#__PURE__*/_jsx(\"span\",{className:\"\",children:\"private profile\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"bg-sky-800 w-1/4 text-emerald-500\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"\",children:[user.scores.length>=1?getHighestScore(user):0,\" WPM\"]})})]});})})]})})]});}{/* <tr>\n    <th class=\"text-emerald-500 bg-sky-800\">{i + 1}</th>\n    <td class=\"text-emerald-500 bg-sky-800\">{user.email}</td>\n    <td class=\"bg-sky-800\"><span class=\"italic hover:underline hover:text-emerald-300 hover:cursor-pointer text-emerald-500\">view profile</span></td>\n    <td class=\"text-emerald-500 bg-sky-800\">{user.high_score}</td>\n</tr> */}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Leaderboard","navigate","users","setUsers","style","setStyle","wordCount","setWordCount","isLoading","setIsLoading","fetch","then","response","json","data","handleVisitProfile","user","id","getHighestScore","score","scores","length","filter","word_length","Math","floor","parseInt","sort","a","b","displayedUsers","map","i","avatar_url","username"],"sources":["/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/src/Leaderboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function Leaderboard(){\n    const navigate = useNavigate();\n    const [users, setUsers] = useState([])\n    const [style, setStyle] = useState(\"random\")\n    const [wordCount, setWordCount] = useState(25)\n    const [isLoading, setIsLoading] = useState(false)\n\n    useEffect(() => {\n        setIsLoading(true)\n        fetch('http://localhost:3000/users')\n        .then(response => response.json())\n        .then(data => {\n            setUsers(data)\n            setIsLoading(false)\n        })\n    }, [])\n\n    function handleVisitProfile(user){\n        navigate(`/profile/${user.id}`)\n    }\n\n    function getHighestScore(user){\n        let score = 0;\n        if (user.scores.length === 0){\n            score = 0;\n        } else {\n            let scores = user.scores.filter((score) => score.style === style).filter((score) => score.word_length === wordCount)\n            if (scores.length === 0){\n                score = 0\n            } else {\n                score = Math.floor(parseInt(scores.sort((a, b) => b.score - a.score)[0].score))\n            }\n        }\n        return score\n    }\n\n    const displayedUsers = users.filter(user => user[\"view_high_score?\"]).sort((a, b) => getHighestScore(b) - getHighestScore(a)).filter(user => getHighestScore(user) !== 0)\n\n    if (style === \"bacon\" && wordCount !== 25){\n        setWordCount(25)\n    } else if (style === \"quote\" && wordCount !== 25){\n        setWordCount(25)\n    }\n\n    return(\n        <div className=\"flex relative flex-col justify-center items-center rounded-b-lg mt-6 mb-10\">\n            <div className=\"bg-sky-900 w-2/5 mb-8 mx-auto rounded-lg relative items-center flex flex-row shadow-xl\">\n                <p onClick={() => setStyle('random')} className={`w-1/3 ${style === \"random\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} text-center hover:text-emerald-500/100 hover:cursor-pointer`}>random</p>\n                <p onClick={() => setStyle('quote')} className={`w-1/3 text-center ${style === \"quote\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} hover:text-emerald-500/100 hover:cursor-pointer`}>quote</p>\n                <p onClick={() => setStyle('bacon')} className={`w-1/3 text-center ${style === \"bacon\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} hover:text-emerald-500/100 hover:cursor-pointer`}>bacon</p>\n                <div className=\"w-[2px] h-8 my-2 bg-emerald-500\"></div>\n                <p id=\"15\" onClick={() => setWordCount(15)} className={`w-1/3 ${wordCount === 15 && style !== \"bacon\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} text-center hover:text-emerald-500/100 hover:cursor-pointer`}>15</p>\n                <p id=\"30\" onClick={() => setWordCount(25)} className={`w-1/3 ${wordCount === 25 || style === \"bacon\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} text-center hover:text-emerald-500/100 hover:cursor-pointer`}>25</p>\n                <p id=\"45\" onClick={() => setWordCount(50)} className={`w-1/3 ${wordCount === 50 && style !== \"bacon\" ? \"text-emerald-500/100\": \"text-emerald-500/40\"} text-center hover:text-emerald-500/100 hover:cursor-pointer`}>50</p>\n            </div>\n            <div className=\"w-1/2 overflow-x-auto shadow-xl\">\n                <table className=\"table w-full\">\n                    <thead className=\"\">\n                        <tr className=\"r\">\n                            <th className=\"text-emerald-500 bg-sky-900 rounded-tl-lg\"></th>\n                            <th className=\"bg-sky-900 text-emerald-500 text-lg\">Username</th>\n                            <th className=\"text-emerald-500 bg-sky-900\"></th>\n                            <th className=\"text-emerald-500 bg-sky-900 text-lg rounded-tr-lg\">Highscore</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"\">\n                        {displayedUsers.map((user, i) => {\n                            return (\n                                <tr className=\"\">\n                                    <td className=\"bg-sky-800 w-1/4 h-10\">\n                                        <div className=\"flex items-center space-x-3 h-8\">\n                                            <div className=\"items-center flex flex-row avatar pr-0 ml-2\">\n                                                <p className=\"ml-2 w-3 text-lg font-bold text-emerald-500\">{i + 1}</p>\n                                                <div className=\"ml-12 object-cover rounded-full mask w-12 h-12 border-2 border-emerald-500\">\n                                                    <img className=\"\" src={user.avatar_url ? user.avatar_url : `https://avatars.githubusercontent.com/u/35440139?v=4}`} alt=\"Avatar\" />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td className=\"bg-sky-800 w-1/4 text-emerald-500 font-bold\">\n                                        <span className=\"\">{user.username}</span>\n                                    </td>\n                                    <td className=\"bg-sky-800 w-1/4 text-emerald-500 text-md italic\">\n                                        {user[\"view_profile?\"] ? <span onClick={() => handleVisitProfile(user)} className=\"hover:underline hover:cursor-pointer\">view profile</span> : <span className=\"\">private profile</span>}\n                                    </td>\n                                    <th className=\"bg-sky-800 w-1/4 text-emerald-500\">\n                                        <span className=\"\">{user.scores.length >= 1 ? getHighestScore(user) : 0} WPM</span>\n                                    </th>\n                                </tr>\n                                \n                            )})}\n                        </tbody>\n                        \n                </table>\n            </div>\n        </div>\n    )\n}\n\n{/* <tr>\n    <th class=\"text-emerald-500 bg-sky-800\">{i + 1}</th>\n    <td class=\"text-emerald-500 bg-sky-800\">{user.email}</td>\n    <td class=\"bg-sky-800\"><span class=\"italic hover:underline hover:text-emerald-300 hover:cursor-pointer text-emerald-500\">view profile</span></td>\n    <td class=\"text-emerald-500 bg-sky-800\">{user.high_score}</td>\n</tr> */}"],"mappings":"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"},"metadata":{},"sourceType":"module"}