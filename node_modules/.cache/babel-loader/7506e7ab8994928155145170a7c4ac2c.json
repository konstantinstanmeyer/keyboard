{"ast":null,"code":"import _slicedToArray from\"/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(_ref){var setCurrentUser=_ref.setCurrentUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),closed=_useState6[0],setClosed=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),startedTyping=_useState8[0],setStartedTyping=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),startedPassword=_useState10[0],setStartedPassword=_useState10[1];var navigate=useNavigate();var emailRegex=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;function handleSubmit(e){e.preventDefault();if(emailRegex.test(email)&&password.length>5){fetch(\"http://35.247.18.60/signup\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{email:email,password:password}})}).then(function(res){if(res.ok){console.log(res.headers.get(\"Authorization\"));localStorage.setItem(\"token\",res.headers.get(\"Authorization\"));fetch(\"http://35.247.18.60/login\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{email:email,password:password}})}).then(function(res){if(res.ok){console.log(res);localStorage.setItem(\"token\",res.headers.get(\"Authorization\"));fetch('http://35.247.18.60/users/current',{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(r){return r.json();}).then(function(r){if(r.hasOwnProperty('email')){setCurrentUser(r);navigate('/profile');}});}});}else{throw new Error(res);}}).then(function(json){return console.dir(json);}).catch(function(err){return console.error(err);});}else if(!emailRegex.test(email)){alert(\"Please enter a valid email\");}else if(password.length<6){alert(\"Password must be at least 6 digits\");}}useEffect(function(){if(startedTyping==false&&email.length>0){setStartedTyping(true);}},[email]);useEffect(function(){if(startedPassword===false&&password.length>0){setStartedPassword(true);}},[password]);return/*#__PURE__*/_jsx(\"div\",{className:\"h-fit w-1/4 bg-sky-900 mx-auto rounded-md relative mt-14 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-10\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"h-24 w-24 m-auto mb-5\",src:\"https://cdn-icons-png.flaticon.com/512/4116/4116368.png\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-emerald-500 text-center text-xl pb-5 mx-5\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Sign up\"})}),/*#__PURE__*/_jsxs(\"form\",{autocomplete:\"off\",onSubmit:handleSubmit,className:\"relative flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center pb-3\",children:/*#__PURE__*/_jsx(\"input\",{autocomplete:\"off\",className:\"h-10 w-2/3 border-4 rounded-md border-emerald-500 placeholder-sky-900 bg-emerald-500 text-sky-900 m-auto indent-3 py-5 my-3\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center\",children:!emailRegex.test(email)&&startedTyping?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm absolute -top-4 text-red-500 p-0 m-0\",children:\"*please enter a valid email*\"}):null}),/*#__PURE__*/_jsx(\"input\",{autocomplete:\"off\",className:\"h-10 w-2/3 border-4 border-emerald-500 text-sky-900 rounded-md m-auto indent-3 py-5 my-2 placeholder-sky-900 bg-emerald-500\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Password...\",type:closed?\"password\":\"text\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center\",children:startedPassword&&password<6?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm absolute -top-[0.1rem] text-red-500 p-0 m-0\",children:\"*password must be 6+ digits*\"}):null}),/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return setClosed(!closed);},className:\"h-6 w-6 relative ml-auto -top-11 right-[20%]\",src:closed?\"https://cdn-icons-png.flaticon.com/512/2356/2356734.png\":\"https://cdn-icons-png.flaticon.com/512/709/709612.png\"}),/*#__PURE__*/_jsx(\"button\",{id:\"submit-button\",className:\"rounded-md h-20 w-2/3 bg-emerald-500 m-auto text-2xl text-sky-900\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return navigate('/signin');},className:\"text-center text-emerald-500 mt-1 hover:cursor-pointer italic\",children:\"return to login\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Signup","setCurrentUser","email","setEmail","password","setPassword","closed","setClosed","startedTyping","setStartedTyping","startedPassword","setStartedPassword","navigate","emailRegex","handleSubmit","e","preventDefault","test","length","fetch","method","headers","body","JSON","stringify","user","then","res","ok","console","log","get","localStorage","setItem","Authorization","getItem","r","json","hasOwnProperty","Error","dir","catch","err","error","alert","target","value"],"sources":["/Users/konstantinstanmeyer/Development/code/projects/keyboard/frontend/src/Signup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function Signup({ setCurrentUser }){\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [closed, setClosed] = useState(true)\n    const [startedTyping, setStartedTyping] = useState(false)\n    const [startedPassword, setStartedPassword] = useState(false)\n    const navigate = useNavigate();\n    const emailRegex = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\n\n    function handleSubmit(e){\n        e.preventDefault();\n        if(emailRegex.test(email) && password.length > 5){\n            fetch(\"http://35.247.18.60/signup\", {\n            method: \"post\",\n            headers: {\n            \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n            user: {\n                email: email,\n                password: password,\n            },\n            }),\n            })\n            .then((res) => {\n            if (res.ok) {\n                console.log(res.headers.get(\"Authorization\"));\n                localStorage.setItem(\"token\", res.headers.get(\"Authorization\"));\n                fetch(\"http://35.247.18.60/login\", {\n                    method: \"post\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                    },\n                    body: JSON.stringify({\n                        user: {\n                        email: email,\n                        password: password,\n                        },\n                }),\n                })\n                .then((res) => {\n                    if (res.ok) {\n                        console.log(res);\n                        localStorage.setItem(\"token\", res.headers.get(\"Authorization\"))\n                        fetch('http://35.247.18.60/users/current', {\n                            headers: {\n                                Authorization: localStorage.getItem(\"token\")\n                            }\n                            })\n                            .then(r => r.json())\n                            .then(r => {\n                                if (r.hasOwnProperty('email')){\n                                    setCurrentUser(r)\n                                    navigate('/profile')\n                                }\n                        })\n                    }\n                })\n            } else {\n                throw new Error(res);\n            }\n            })\n            .then((json) => console.dir(json))\n            .catch((err) => console.error(err))\n        } else if (!emailRegex.test(email)) {\n            alert(\"Please enter a valid email\")\n        } else if (password.length < 6) {\n            alert(\"Password must be at least 6 digits\")\n        }\n    }\n\n    useEffect(() => {\n        if (startedTyping == false && email.length > 0){\n            setStartedTyping(true);\n        }\n    }, [email])\n\n    useEffect(() => {\n        if (startedPassword === false && password.length > 0){\n            setStartedPassword(true);\n        }\n    }, [password])\n\n    return (\n        <div className=\"h-fit w-1/4 bg-sky-900 mx-auto rounded-md relative mt-14 shadow-xl\">\n            <div className=\"py-10\">\n                <img className=\"h-24 w-24 m-auto mb-5\" src=\"https://cdn-icons-png.flaticon.com/512/4116/4116368.png\"/>\n                <h5 className=\"text-emerald-500 text-center text-xl pb-5 mx-5\"><strong>Sign up</strong></h5>\n                <form autocomplete=\"off\" onSubmit={handleSubmit} className=\"relative flex flex-col justify-center\">\n                    <div className=\"relative flex justify-center pb-3\">\n                        <input autocomplete=\"off\" className=\"h-10 w-2/3 border-4 rounded-md border-emerald-500 placeholder-sky-900 bg-emerald-500 text-sky-900 m-auto indent-3 py-5 my-3\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email...\"/>\n                    </div>\n                    <div className=\"relative flex justify-center\">\n                        {!emailRegex.test(email) && startedTyping ? <p className=\"text-sm absolute -top-4 text-red-500 p-0 m-0\">*please enter a valid email*</p> : null}\n                    </div>\n                    <input autocomplete=\"off\" className=\"h-10 w-2/3 border-4 border-emerald-500 text-sky-900 rounded-md m-auto indent-3 py-5 my-2 placeholder-sky-900 bg-emerald-500\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password...\" type={closed ? \"password\" : \"text\"}/>\n                    <div className=\"relative flex justify-center\">\n                        {startedPassword && password < 6 ? <p className=\"text-sm absolute -top-[0.1rem] text-red-500 p-0 m-0\">*password must be 6+ digits*</p> : null}\n                    </div>\n                    <img onClick={() => setClosed(!closed)} className=\"h-6 w-6 relative ml-auto -top-11 right-[20%]\" src={closed ? \"https://cdn-icons-png.flaticon.com/512/2356/2356734.png\" : \"https://cdn-icons-png.flaticon.com/512/709/709612.png\"}/>\n                    <button id=\"submit-button\" className=\"rounded-md h-20 w-2/3 bg-emerald-500 m-auto text-2xl text-sky-900\">Sign Up</button>\n                </form>\n                <p onClick={() => navigate('/signin')} className=\"text-center text-emerald-500 mt-1 hover:cursor-pointer italic\">return to login</p>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}